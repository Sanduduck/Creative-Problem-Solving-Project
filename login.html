<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Log In</title>

  <!--Bootstrap Css-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
  <!--Font-aweome-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">

  <style>
    :root{
      --background-theme:#fdfdfd;   /* 어두운 배경 */
      --panel-bg:#fdfdfd;        /* 우측 폼 패널 배경 */
      --text-color:#000;         /* 기본 글자색 */
      --muted:#000;
      --accent:#000;
      --border:#555;
    }

    *,html{
      margin:0;
      padding:0;
      font-size:10px;
      color:var(--text-color);
      box-sizing:border-box;
      font-family:'Poppins',sans-serif;
    }

    body{
      width:100%;
      background-color:var(--background-theme);
    }
    h1{ font-size:3.2rem; }
    p{ font-size:1.2rem; }

    /* Sections */
    .login_section{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      padding:16px;
    }

    .accounts_container{
      height:550px;
      min-height:550px;
      max-height:100%;
      border-radius:10px;
      box-shadow:8px 8px 8px rgba(0,0,0,0.25);
      background-color:var(--panel-bg);   /* 어두운 패널 */
      overflow:hidden;
      width:100%;
      max-width:1100px;
    }

    /* 좌측 이미지 영역 */
    .accounts_image img{
      object-fit:cover;
      object-position:center;
      border-top-left-radius:10px;
      border-bottom-left-radius:10px;
      filter:brightness(1);
    }

    .accounts_col form .form-group{
      position:relative !important;
    }
    .accounts_col form .form-control{
      font-size:1.6rem;
      padding:20px 12px 14px 12px;  /* 라벨 겹침 고려 */
      margin-bottom:24px;
      background:transparent !important;
      color:#000;
      border:1px solid var(--border);
      border-radius:8px;
    }
    .accounts_col form .form-control::placeholder{ color:#aaa; }

    .accounts_col form label,
    .accounts_col form .form-group i{
      position:absolute;
      z-index:1;
      pointer-events:none;
      top:50%;
      transform:translateY(-50%);
      font-size:1.2rem;
      left:14px;
      color:var(--muted);
      transition:.2s linear;
    }

    /* 라벨 떠오르는 상태 */
    .change_label{
      background-color:var(--panel-bg); /* 어두운 패널 색으로 맞춤 */
      padding:0 6px;
      transform:scale(0.9);
      top:-8px !important;
      color:#000;
    }

    /* 눈 아이콘 */
    .accounts_col form .form-group i{
      left:auto !important;
      right:12px;
      cursor:pointer;
      pointer-events:visible;
      color:#000;
    }

    .register_btn{
      padding:10px 0 !important;
      font-size:1.6rem !important;
      font-weight:600 !important;
      background:var(--accent);
      border:none;
    }

    .already_member_box p,
    .already_member_box span{
      cursor:pointer;
      color:#000;
    }
    .login_form, .signup_form{ display:none; }

    /* 텍스트 색 업톤 */
    .title h1{ color:#000; }
    .title p{ color:#000; }

    /* 반응형 */
    @media (max-width:992px){
      .accounts_image{ display:none; }
      .accounts_container{ max-width:560px; }
    }
  </style>
</head>
<body>
  <section class="login_section">
    <div class="container outer_container accounts_container">
      <div class="row h-100">
        <!-- 좌측 이미지 -->
        <div class="col col-sm-12 col-md-12 col-lg-8 m-0 p-0 w-100 h-100 accounts_col">
          <div class="accounts_image w-100 h-100">
            <img src="https://img.freepik.com/free-photo/social-media-instagram-digital-marketing-concept-3d-rendering_106244-1717.jpg?w=1480"
                 alt="accounts_image" class="img-fluid w-100 h-100" />
          </div>
        </div>

        <!-- 우측 폼 -->
        <div class="col col-sm-12 col-md-12 col-lg-4 m-0 p-0 accounts_col">
          <!-- Sign Up -->
          <div class="accounts_forms signup_form w-100 h-100" id="signup">
            <div class="title mt-4 p-4 w-100">
              <h1>Sign Up</h1>
              <p class="mt-3">Create your account to get started.</p>
            </div>

            <form method="post" class="form w-100 p-4">
              <div class="row">
                <div class="col-6 m-0">
                  <div class="form-group">
                    <label for="fname">Firstname</label>
                    <input type="text" name="fname" class="form-control" id="fname"
                           onfocus="labelUp(this)" onblur="labelDown(this)" required />
                  </div>
                </div>
                <div class="col-6 m-0">
                  <div class="form-group">
                    <label for="lname">Lastname</label>
                    <input type="text" name="lname" class="form-control" id="lname"
                           onfocus="labelUp(this)" onblur="labelDown(this)" required />
                  </div>
                </div>
              </div>

              <div class="form-group">
                <label for="email_signup">Email</label>
                <input type="email" name="email" class="form-control" id="email_signup"
                       onfocus="labelUp(this)" onblur="labelDown(this)" required />
              </div>
              <div class="form-group">
                <label for="signup_password">Password</label>
                <i class="fa fa-eye-slash" id="eye_icon_signup"></i>
                <input type="password" name="pass" class="form-control" id="signup_password"
                       onfocus="labelUp(this)" onblur="labelDown(this)" required />
              </div>
              <div class="form-group">
                <label for="cpass">Confirm Password</label>
                <input type="password" name="cpass" class="form-control" id="cpass"
                       onfocus="labelUp(this)" onblur="labelDown(this)" required />
              </div>
              <div class="form-group">
                <button type="submit" class="btn btn-primary register_btn w-100">Sign Up</button>
              </div>
            </form>

            <div class="already_member_box">
              <p class="text-center" id="to_login">I am already member</p>
            </div>
          </div>

          <!-- Sign In -->
          <div class="accounts_forms w-100 h-100" id="login">
            <div class="title mt-4 p-4 w-100">
              <h1>Sign In</h1>
              <p class="mt-3">Welcome back.</p>
            </div>

            <form method="post" class="form w-100 p-4" id="login_form" novalidate>
              <div class="form-group">
                <label for="email">Email</label>
                <input type="text" name="email" class="form-control" id="email"
                       onfocus="labelUp(this)" onblur="labelDown(this)" required />
              </div>
              <div class="form-group">
                <label for="login_password">Password</label>
                <i class="fa fa-eye-slash" id="eye_icon_login"></i>
                <input type="password" name="pass" class="form-control" id="login_password"
                       onfocus="labelUp(this)" onblur="labelDown(this)" required />
              </div>

              <!-- 🔴 추가: 에러 메시지 표시 영역 (초기 숨김) -->
              <div id="login-error" style="color:red;font-size:1.3rem;margin-top:-6px;margin-bottom:12px;display:none;">
                아이디 또는 비밀번호가 올바르지 않습니다.
              </div>

              <div class="form-group mb-0">
                <button type="submit" class="btn btn-primary register_btn w-100">Sign In</button>
              </div>
            </form>

            <div class="already_member_box d-flex justify-content-between px-4">
              <span class="text-center" id="to_signup">Create an account?</span>
              <span class="text-center">Forgot password</span>
            </div>
          </div>
        </div>
        <!-- /우측 폼 -->
      </div>
    </div>
  </section>

  <!-- jQuery / Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Label Position
    function labelUp(input){
      input.parentElement.children[0].classList.add("change_label");
    }
    function labelDown(input){
      if(!input.value.trim()){
        input.parentElement.children[0].classList.remove("change_label");
      }
    }

    // Show & Hide password
    const eye_icon_signup = document.getElementById('eye_icon_signup');
    const eye_icon_login  = document.getElementById('eye_icon_login');
    const sign_up_password = document.getElementById('signup_password'); // 변수명 통일
    const login_password   = document.getElementById('login_password');

    if(eye_icon_signup){
      eye_icon_signup.addEventListener('click', ()=>{
        hideAndShowPass(eye_icon_signup, sign_up_password);
      });
    }
    if(eye_icon_login){
      eye_icon_login.addEventListener('click', ()=>{
        hideAndShowPass(eye_icon_login, login_password);
      });
    }

    const hideAndShowPass = (eye_icon, password) => {
      if(!eye_icon || !password) return;
      if(eye_icon.classList.contains("fa-eye-slash")){
        eye_icon.classList.remove('fa-eye-slash');
        eye_icon.classList.add('fa-eye');
        password.setAttribute('type', 'text');
      }else{
        eye_icon.classList.remove('fa-eye');
        eye_icon.classList.add('fa-eye-slash');
        password.setAttribute('type', 'password');
      }
    };

    // Sign Up & Sign In Toggle
    const to_signup = document.getElementById('to_signup');
    const to_login  = document.getElementById('to_login');
    function let_change(){
      const login  = document.getElementById('login');
      const signup = document.getElementById('signup');
      login.classList.toggle('login_form');
      signup.classList.toggle('signup_form');
    }
    if(to_signup) to_signup.addEventListener('click', let_change);
    if(to_login)  to_login.addEventListener('click', let_change);

    // ----- admin/admin 무조건 로그인 허용 & 이메일 형식 무시 -----
    (function(){
      const loginForm = document.getElementById('login_form');
      if(!loginForm) return;

      // 이메일 형식 검사 비활성화
      loginForm.setAttribute('novalidate', 'true');

      loginForm.addEventListener('submit', function(e){
        e.preventDefault();
        const id = (document.getElementById('email').value || '').trim();
        const pw = (document.getElementById('login_password').value || '').trim();
        const err = document.getElementById('login-error');

        if (id === 'admin' && pw === 'admin'){
          if(err) err.style.display = 'none';
          window.location.href = 'cctv.html';
        }else{
          // 🔴 alert 대신 빨간 문구 노출
          if(err){
            err.textContent = '아이디 또는 비밀번호가 올바르지 않습니다.';
            err.style.display = 'block';
          }
        }
      });
    })();
  </script>
</body>
</html>
